<?php

class ZipCodeValidator extends BLITZValidator
{
	private $pattern = "/^\d{5}([\-]\d{4})?$/";
	private $shouldRequire;
	
	public function __construct($key, $required=false, $message=null)
	{
		$this->isRequired    =  $required;
		$this->shouldRequire =  $required ? false : true;
		$this->key           =  $key;
		$this->message       =  $message;
	}
	
	public function validate()
	{	
		$value = $this->form->{$this->key};
		$this->updateRequiredFlag($value);
		
		$this->isValid = filter_var($value, 
									FILTER_VALIDATE_REGEXP, 
									array("options"=>array("regexp"=>$this->pattern)));
	}
}
?>